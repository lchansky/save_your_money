{% extends 'base.html' %}

{% block title %}
{{ title }} - {{ block.super }}
{% endblock %}

{% block content %}



<h1>{{ title }}</h1>
{% for day, list_operations in operations_in_days.items %}
    <div class="card text-dark bg-light mb-5" style="max-width: 700px;">
        <div class="card-header fw-bold text-start">{{ day }}</div>
            {% for operation in list_operations %}
                <a href="{{ operation.get_absolute_url }}" class="list-group-item list-group-item-action">
                    <div class="d-flex w-100 justify-content-between">
                        <div class="fs-4 fw-bold">{{ operation.category }}</div>
                        <div class="fs-4">
                        {% if operation.category.type_of == 'pay' %}
                            {% if operation.amount1 > 0 %}
                                <div style="color:#ba1111;">-{{ operation.amount1|floatformat:"-2" }} {{ operation.currency1 }}
                            {% else %}
                                <div style="color:green;">–í–æ–∑–≤—Ä–∞—Ç +{{ operation.amount1|floatformat:"-2"|slice:"1:" }} {{ operation.currency1 }}
                            {% endif %}
                            {% if operation.currency1 != operation.currency2 %}
                                ({% if operation.amount2 > 0 %}-{{ operation.amount2|floatformat:"-2" }}{% else %}{{ operation.amount2|floatformat:"-2"|slice:"1:" }}{% endif %} {{ operation.currency2 }})</div>
                            {% else %}
                            </div>
                            {% endif %}

                        {% endif %}

                        {% if operation.category.type_of == 'earn' %}
                            {% if operation.amount1 > 0 %}
                                <div style="color:green;">+{{ operation.amount1|floatformat:"-2" }} {{ operation.currency1 }}
                            {% else %}
                                <div style="color:#ba1111;">–í–æ–∑–≤—Ä–∞—Ç {{ operation.amount1|floatformat:"-2" }} {{ operation.currency1 }}
                            {% endif %}
                            {% if operation.currency1 != operation.currency2 %}
                                ({% if operation.amount2 > 0 %}+{% endif %}{{ operation.amount2|floatformat:"-2" }} {{ operation.currency2 }})</div>
                            {% else %}
                                </div>
                            {% endif %}
                        {% endif %}

                        {% if operation.category.type_of == 'transfer' %}
                            -{{ operation.amount1|floatformat:"-2" }} {{ operation.currency1 }}
                            ‚ûî +{{ operation.amount2|floatformat:"-2" }} {{ operation.currency2 }}
                        {% endif %}
                            
                            
                        </div>
                    </div>
                    <div class="d-flex w-100 justify-content-between">
                        <p class="fs-5">
                        üí≥ {{ operation.from_wallet.name }}{% if operation.to_wallet %}‚ûî {{ operation.to_wallet.name }}{% endif %}
                        </p>
                        <p class="fs-5">{{ operation.updated_at|time }}</p>
                    </div>
                    <div class="text-start">{{ operation.description|truncatechars:70 }}</div>
                </a>
            {% endfor %}
    </div>
{% empty %}
<h5>
–ó–¥–µ—Å—å –Ω–∏—á–µ–≥–æ –Ω–µ—Ç. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤—É—é –æ–ø–µ—Ä–∞—Ü–∏—é!<br>(–û–ø–µ—Ä–∞—Ü–∏–∏ >> –î–æ–±–∞–≤–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é)
</h5>
{% endfor %}

{% endblock %}